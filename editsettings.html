<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Edit Profil - KPPN Majene</title>
    <link rel="icon" href="LogoKemenkeu.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="apple-icon.png">
    <link rel="shortcut icon" href="favicon.ico">

    <link rel="stylesheet" href="vendors/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="vendors/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="vendors/themify-icons/css/themify-icons.css">
    <link rel="stylesheet" href="vendors/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" href="vendors/selectFX/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="vendors/jqvmap/dist/jqvmap.min.css">


    <link rel="stylesheet" href="style.css">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
</head>

<body>
    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">
            <div class="navbar-header">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="#"><img src="logo.png" alt="Logo"></a>
            </div>
            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="dashboard.html"> <i class="menu-icon fa fa-dashboard"></i>Dashboard </a>
                    </li>
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" id="tablesDropdown">
                            <i class="menu-icon fa fa-table"></i>Tables
                        </a>
                        <ul class="sub-menu children dropdown-menu" id="tablesMenu">
                            <li><i class="fa fa-table"></i><a href="tables-basic.html">New Data</a></li>
                            <li><i class="fa fa-table"></i><a href="tables-data.html">Raw Data</a></li>
                        </ul>
                    </li>

                </ul>
            </div>
        </nav>
    </aside>

    <div id="right-panel" class="right-panel">
        <header id="header" class="header">
            <div class="header-menu">
                <div class="col-sm-7">
                    <a id="menuToggle" class="menutoggle pull-left"><i class="fa fa-tasks"></i></a>
                </div>
                <div class="col-sm-5">
                    <div class="user-area dropdown float-right">
                        <a href="#" id="userDropdown" class="dropdown-toggle" aria-haspopup="true"
                            aria-expanded="false">
                            <img class="user-avatar rounded-circle" src="admin.jpg" alt="User Avatar">
                        </a>

                        <div id="userMenu" class="user-menu dropdown-menu">
                            <a class="nav-link" href="profile.html"><i class="fa fa-user"></i> My Profile</a>
                            <a class="nav-link" href="#"><i class="fa fa-cog"></i> Settings</a>
                            <a class="nav-link" id="logout" href="index.html" onclick="logout()"><i
                                    class="fa fa-power-off"></i> Logout</a>
                        </div>
                        <!-- <script>
                            function logout() {
                                // Hapus session storage atau local storage jika ada
                                 sessionStorage.clear();
                                // localStorage.clear();
                        
                                // Arahkan ke halaman login
                                window.location.href = "login.html";
                            }
                        </script> -->
                    </div>



                </div>
            </div>
        </header>

        <div class="breadcrumbs">
            <div class="col-sm-12">
                <div class="page-header text-center">
                    <h1>Edit Profil</h1>
                </div>
            </div>
        </div>

        <div class="content mt-3">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 offset-md-3">
                        <div class="card">
                            <div class="card-header text-center">

                                <img src="admin.jpg" class="rounded-circle" width="100" alt="User Avatar">
                            </div>
                            <div class="card-body">
                                <form id="editSettingsForm">
                                    <div class="form-group">
                                        <label for="fullName">Nama Lengkap</label>
                                        <input type="text" id="fullName" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="email">Email</label>
                                        <input type="email" id="email" class="form-control" required readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="alamat">Alamat</label>
                                        <input type="text" id="alamat" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="userPw">Password</label>
                                        <input type="text" id="userPw" class="form-control" required>
                                    </div>
                                    <button type="submit" class="btn btn-success btn-block">Simpan Perubahan</button>
                                    <a href="profile.html" class="btn btn-secondary btn-block">Batal</a>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Cek apakah pengguna sudah login
            const loggedInUser = localStorage.getItem("loggedInUser");

            if (!loggedInUser) {
                window.location.href = "index.html"; // Redirect ke login jika belum login
            } else {
                let users = JSON.parse(localStorage.getItem("users")) || {};
                let userData = users[loggedInUser];

                if (userData) {
                    document.getElementById("userFullName").innerText = userData.fullName || "Nama Pengguna";
                    document.getElementById("userEmail").innerText = loggedInUser;
                    document.getElementById("userAlamat").innerText = userData.alamat || "Alamat Pengguna";
                    document.getElementById("userPw").innerText = userData.password || "Password Pengguna";
                    // document.getElementById("userRole").innerText = "User"; // Bisa diganti dengan data tambahan jika ada
                }
            }

            // Logout function
            document.getElementById("logout").addEventListener("click", function () {
                localStorage.removeItem("loggedInUser");
                window.location.href = "index.html"; // Redirect ke halaman login
            });
        });
    </script>



    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const loggedInUser = localStorage.getItem("loggedInUser");
            if (!loggedInUser) {
                window.location.href = "index.html";
            } else {
                let users = JSON.parse(localStorage.getItem("users")) || {};
                let userData = users[loggedInUser];

                if (userData) {
                    document.getElementById("fullName").value = userData.fullName || "";
                    document.getElementById("email").value = loggedInUser;
                    document.getElementById("alamat").value = userData.alamat || "";
                    document.getElementById("userPw").value = userData.password || "";
                }
            }

            document.getElementById("editSettingsForm").addEventListener("submit", function (event) {
                event.preventDefault();

                let users = JSON.parse(localStorage.getItem("users")) || {};
                let existingUserData = users[loggedInUser] || {};

                // Simpan kembali password lama jika ada
                users[loggedInUser] = {
                    fullName: document.getElementById("fullName").value,
                    alamat: document.getElementById("alamat").value,
                    password: document.getElementById("userPw").value,
                };

                localStorage.setItem("users", JSON.stringify(users));
                alert("Password berhasil diperbarui!");
                window.location.href = "settings.html";
            });

            document.getElementById("logoutBtn").addEventListener("click", function () {
                localStorage.removeItem("loggedInUser");
                window.location.href = "index.html";
            });
        });

    </script>



    <script src="vendors/jquery/dist/jquery.min.js"></script>
    <script src="vendors/popper.js/dist/umd/popper.min.js"></script>
    <script src="vendors/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="assets/js/main.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const userDropdown = document.getElementById("userDropdown");
            const userMenu = document.getElementById("userMenu");

            userDropdown.addEventListener("click", function (event) {
                event.preventDefault();
                userMenu.classList.toggle("show");
            });

            // Tutup dropdown jika mengklik di luar
            document.addEventListener("click", function (event) {
                if (!userDropdown.contains(event.target) && !userMenu.contains(event.target)) {
                    userMenu.classList.remove("show");
                }
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var dropdownToggle = document.getElementById("tablesDropdown");
            var dropdownMenu = document.getElementById("tablesMenu");

            dropdownToggle.addEventListener("click", function (event) {
                event.preventDefault(); // Mencegah navigasi default
                dropdownMenu.classList.toggle("show"); // Toggle kelas 'show'
            });

            // Menutup dropdown jika klik di luar menu
            document.addEventListener("click", function (event) {
                if (!dropdownToggle.contains(event.target) && !dropdownMenu.contains(event.target)) {
                    dropdownMenu.classList.remove("show");
                }
            });
        });
    </script>


    <script src="vendors/chart.js/dist/Chart.bundle.min.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/widgets.js"></script>
    <script src="vendors/jqvmap/dist/jquery.vmap.min.js"></script>
    <script src="vendors/jqvmap/examples/js/jquery.vmap.sampledata.js"></script>
    <script src="vendors/jqvmap/dist/maps/jquery.vmap.world.js"></script>
    <script>
        (function ($) {
            "use strict";

            jQuery('#vmap').vectorMap({
                map: 'world_en',
                backgroundColor: null,
                color: '#ffffff',
                hoverOpacity: 0.7,
                selectedColor: '#1de9b6',
                enableZoom: true,
                showTooltip: true,
                values: sample_data,
                scaleColors: ['#1de9b6', '#03a9f5'],
                normalizeFunction: 'polynomial'
            });
        })(jQuery);
    </script>

    <script src="vendors/jquery/dist/jquery.min.js"></script>
    <script src="vendors/bootstrap/dist/js/bootstrap.min.js"></script>
</body>

</html>